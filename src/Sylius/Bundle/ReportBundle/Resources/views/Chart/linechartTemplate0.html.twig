{% extends 'SyliusWebBundle:Backend:layout.html.twig' %}

{% from 'SyliusReportBundle:Chart:macros.html.twig' import list %}

{% block javascripts %}
{{ parent() }}
{% javascripts output='assets/compiled/backend_report.js'
    'bundles/syliusreport/js/chart.js'
%}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    <script>
        var labels = document.getElementById("data").getAttribute("data-labels").split(" ");
        var values = document.getElementById("data").getAttribute("data-values").split(" ");

        var lineChartData = {
            labels : labels,
            datasets : [
                {
                    fillColor : "rgba(220,220,220,0.5)",
                    fillColor : "rgba(151,187,205,0.2)",
                    strokeColor : "rgba(151,187,205,1)",
                    pointColor : "rgba(151,187,205,1)",
                    pointStrokeColor : "#fff",
                    pointHighlightFill : "#fff",
                    pointHighlightStroke : "rgba(151,187,205,1)",
                    data : values
                }
            ]
        }

        window.onload = function(){
            var ctx = document.getElementById("canvas").getContext("2d");
            window.myLine = new Chart(ctx).Line(lineChartData, {
                responsive: true
            });
        }
    </script>
{% endjavascripts %}
{% endblock %}

{% block content %}
    <div style="width: 60%; margin-left: 15%;">
        <canvas id="canvas" height="450" width="600"></canvas>
        <div id="data" class="hidden" data-labels="{% for item in values %}{{ item.xAxis }}{% if loop.index != loop.length %} {% endif %}{% endfor %}" data-values="{% for item in values %}{{ item.yAxis }}{% if loop.index != loop.length %} {% endif %}{% endfor %}"></div>
    </div>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
{% endblock %}
